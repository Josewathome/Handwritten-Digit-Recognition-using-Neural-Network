!function(){"use strict";var t={6594:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Eic=void 0;var o=function(t){function e(e){var i=t.call(this)||this;if(i.conf=e,i.useTopWindow(),!i.isValidData(e))throw new Error("Equativ Iframe Clicks: wrong input data format");return i.init(),i}return r(e,t),e.prototype.isValidData=function(t){return!this.isObjectEmpty(t)&&this.isValidStringField(t.id)&&this.isValidStringField(t.url)},e.prototype.init=function(){var t=this;if(this.log("init"),document.getElementById(this.conf.id))this.log("element #"+this.conf.id+" has been found"),this.addListeners();else{var e=new MutationObserver((function(){document.getElementById(t.conf.id)&&(t.log("element #"+t.conf.id+" has been found"),t.addListeners(),e.disconnect())}));e.observe(document,{childList:!0,subtree:!0})}},e.prototype.addListeners=function(){var t=this;this.log("addListeners"),this.w.focus(),this.w.addEventListener("blur",(function(){return t.logClick()})),this.isFirefox()||document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&t.w.focus()}))},e.prototype.logClick=function(){var t=this;this.log("logClick"),setTimeout((function(){var e;(null===(e=document.activeElement)||void 0===e?void 0:e.id)===t.conf.id&&(t.log("clicked"),(new Image).src=t.conf.url)}))},e}(i(7322).Global);e.Eic=o,window.sas=window.sas||{},window.sas.eic=window.sas.eic||o},7322:function(t,e){var i=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function a(t){try{l(n.next(t))}catch(t){o(t)}}function s(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Global=void 0;var r=function(){function t(t){var e=this;if(void 0===t&&(t=!1),this.d=document,this.w=window,this.logOn=!1,this.isReady=!1,this.impressionsOnePxArea=1e-4,this.impressionsThirtySecArea=100,this.impressionsThirtySecDelay=30,this.getHiddenProp=function(){if("hidden"in e.d)return"hidden";for(var t=0,i=["webkit","moz","ms","o"];t<i.length;t++){var n=i[t];if(n+"Hidden"in document)return n+"Hidden"}return null},this.visibilityHandler=function(){var t;(t=e.getHiddenProp())&&e.d[t]?e.blurHandler():e.focusHanlder()},!t){if((!!this.getIeVersion(navigator.userAgent)||window.frameElement)&&void 0!==window.inDapIF&&window.inDapIF){this.log("FIF mode");var i=this.useTopWindow();this.friendlyIframe=i.currentFrame}}this.isAMPFrame=this.isAMP(),this.docReady((function(){return e.isReady=!0}))}return t.prototype.useTopWindow=function(){var t=this.getTopWindow();return this.w=t.currentWindow,this.d=this.w.document,t},t.prototype.addElement=function(t,e,i,n){void 0===n&&(n=!1);var r=this.d.createElement(t);for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.setAttribute(o,String(i[o]));return n?e.insertBefore(r,e.firstElementChild):e.appendChild(r),r},t.prototype.addEvent=function(t,e,i){t&&e&&i&&(t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i))},t.prototype.addCss=function(t,e){void 0===e&&(e=this.d.getElementsByTagName("head")[0]);var i=this.d.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(this.d.createTextNode(t)),e.appendChild(i)},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logOn&&console.log(t)},t.prototype.docReady=function(t,e,i){var n=this;void 0===e&&(e=this.w),void 0===i&&(i=this.d);var r=function(){n.log("ready"),i.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),t()};"complete"===i.readyState?setTimeout(t):(i.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))},t.prototype.winReady=function(t,e,i){var n=this;void 0===e&&(e=this.w),void 0===i&&(i=this.d);var r=function(){n.log("window loaded"),e.removeEventListener("load",r,!1),t()};e.addEventListener("load",r,!1)},t.prototype.tracking=function(t){t&&((new Image).src=t)},t.prototype.isChild=function(t,e){if(e)for(var i=e.parentNode;null!=i;){if(i===t)return!0;i=i.parentNode}return!1},t.prototype.getElementVisibility=function(t){var e=t.getBoundingClientRect(),i=(e.right-e.left)*(e.bottom-e.top);if(0===i)return 0;var n=Math.max(0,Math.min(e.bottom,this.w.innerHeight)-Math.max(0,e.top)),r=Math.max(0,Math.min(e.right,this.w.innerWidth)-Math.max(0,e.left));return Math.round(n*r*100/i)},t.prototype.checkTabVisibility=function(t,e){this.focusHanlder=t,this.blurHandler=e;var i=this.getVisibilityEventName();i&&this.addEvent(this.d,i,this.visibilityHandler)},t.prototype.clearTabVisibilityHandler=function(){var t=this.getVisibilityEventName();t&&this.d.removeEventListener(t,this.visibilityHandler)},t.prototype.getVisibilityEventName=function(){var t="",e=this.getHiddenProp();return e&&(t=e.replace(/[H|h]idden/,"")+"visibilitychange"),t},t.prototype.getIosVersion=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)]}},t.prototype.isExternal=function(t,e){var i=this.getDomain(e);return-1===t.indexOf(i)},t.prototype.getDomain=function(t){var e=t;if(null!=t){var i=t.split(".").reverse();null!=i&&i.length>1&&(e=i[1]+"."+i[0])}return e},t.prototype.offsetTop=function(t){var e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop),t=t.offsetParent}while(t);return e},t.prototype.isString=function(t){return"string"==typeof t||t instanceof String},t.prototype.isObjectEmpty=function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t&&0===Object.keys(t).length&&Object.getPrototypeOf(t)===Object.prototype},t.prototype.isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},t.prototype.isSafari=function(){var t=this.w.navigator.userAgent;return!!(t.indexOf("Safari")>0&&/iPad|iPhone|iPod/.test(t))},t.prototype.getPageHeight=function(){var t=this.d.body,e=this.d.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},t.prototype.getIeVersion=function(t){t=t||navigator.userAgent;var e=/\b(MSIE |Trident.*?rv:|Edge\/)(\d+)/.exec(t);return e?parseInt(e[2],10):void 0},t.prototype.offset=function(t){var e=t.getBoundingClientRect(),i=this.w.pageYOffset||this.d.documentElement.scrollTop;return{top:e.top+i,bottom:e.bottom+i,left:e.left,right:e.right}},t.prototype.triggerCustomEvent=function(t,e,i,n){var r;(void 0===i&&(i=null),void 0===n&&(n={width:void 0,height:void 0}),t.length)&&(this.d.createEvent?(r=this.d.createEvent("HTMLEvents")).initEvent(t,!0,!0):(r=this.d.createEventObject()).eventType=t,r.eventName=t,null!==i&&(r.videoDuration=i),void 0!==n.width&&void 0!==n.height&&(r.creativeSize=n),r.formatId=e,this.d.createEvent?this.w.dispatchEvent(r):this.w.fireEvent("on"+r.eventType,r))},t.prototype.getTopWindow=function(){for(var t=5,e=window,i=this.getIeVersion(navigator.userAgent)?null:window.frameElement;t--;)try{e.parent&&e.parent.document&&(i=e.frameElement,(e=e.parent)===e.parent&&(t=0))}catch(t){this.log("getTopWindow error",t)}return{currentWindow:e,currentFrame:i}},t.prototype.isMobile=function(){return"ontouchstart"in this.w},t.prototype.getJson=function(t){return i(this,void 0,void 0,(function(){var e,i,r;return n(this,(function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),i=e,[4,e.json()];case 3:return i.parsedBody=n.sent(),[3,5];case 4:throw r=n.sent(),new Error("JSON parsing error, "+r);case 5:if(!e.ok)throw new Error("Server responded with "+e.statusText);return[2,e]}}))}))},t.prototype.isValidStringField=function(t){return Boolean(t)&&this.isString(t)},t.prototype.limitString=function(t,e){return t.length>e?t.substring(0,e-3)+"...":t},t.prototype.trackArrayOfPixels=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];n&&this.tracking(n)}},t.prototype.isAMP=function(){return this.w.context?"AMP-AD"===this.w.context.tagName:this.w.name.indexOf('"tagName":"AMP-AD"')>-1},t}();e.Global=r},7956:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Ssb=void 0;var o=i(6594),a=i(7322),s=i(5162),l=function(t){function e(e){var i=t.call(this)||this;if(i.conf=e,!i.isValidData(e))throw new Error("Equativ Ssb script: wrong input data format");return i.init(),i}return r(e,t),e.prototype.init=function(){var t=document.getElementById(this.conf.tagId);(new Image).src=this.conf.impressionsOnRender,(new s.Viewability).init(t,{0:{viewable:[this.conf.viewable],undetermined:[this.conf.undetermined]}}),(new s.Viewability).init(t,{0:{viewable:[this.conf.viewable1px]}},{area:this.impressionsOnePxArea}),this.conf.clickCount&&new o.Eic({id:this.conf.tagId,url:this.conf.clickCount})},e.prototype.isValidData=function(t){return!this.isObjectEmpty(t)&&t.clickCount?this.isValidStringField(t.clickCount):this.isValidStringField(t.impressionsOnRender)&&this.isValidStringField(t.undetermined)&&this.isValidStringField(t.viewable)&&this.isValidStringField(t.tagId)&&this.isValidStringField(t.viewable1px)},e}(a.Global);e.Ssb=l,window.sas=window.sas||{},window.sas.ssb=window.sas.ssb||l},885:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.ViewabilityCore=void 0;var o=function(t){function e(){var e=t.call(this)||this;return e.integration=0,e.resultLayer=null,e.playingCreativeId=null,e.pixels={},e.threshold=[],e.isIOCallbackCalled=!1,e.addEvent(e.d,"visibilitychange",(function(){e.d.hidden?e.w.clearTimeout(e.ioTimeoutId):e.checkCurrentState()})),e}return r(e,t),e.prototype.videoHandler=function(t,e){var i=["complete","skip","AdSkipped","AdStopped"];i.concat(["pause","AdPaused","abort","emptied","ended","error","seeked","seeking"]).indexOf(t)>-1?this.playingCreativeId=null:["start","AdStarted","AdPlaying","resume","play","playing"].indexOf(t)>-1&&(this.playingCreativeId=e,void 0!==this.intersectionObserverCallback&&0!==Object.keys(this.pixels).length&&this.intersectionObserverCallback(this.lastIntersectionObserverEntry)),i.indexOf(t)>-1&&this.executePixels(e,"notviewable")},e.prototype.updateCreativePixels=function(t,e){return this.log("updateCreativePixels"),this.isIOCallbackCalled=!1,void 0!==this.intersectionObserverCallback&&this.intersectionObserverCallback(this.lastIntersectionObserverEntry),this.pixels[t]=e},e.prototype.start=function(t,e,i){var n=this;if(this.log("start",t,e,i),t=this.checkElementStatus(t).element,this.pixels=e,!t)throw new Error('Smart Viewability: passed element to measure is not valid and its value is "'+t+'"');var r=this.mergeOptions(i,t);if(r.videoIntegration||(this.playingCreativeId=Object.keys(e)[0]?String(Object.keys(e)[0]):"1"),this.integration=r.videoIntegration||this.integration,r.logMessages&&(this.logOn=!0),r.testLayer&&(this.resultLayer=this.addInfoLayer()),i&&i.threshold){this.threshold=i.threshold;var o="aboveCallback",a="belowCallback";this.threshold.forEach((function(t){t.lastSent=0,"function"!=typeof t[o]&&(t[o]=function(){return console.log()}),"function"!=typeof t[a]&&(t[a]=function(){return console.log()})}))}t.id||(t.id="sas_"+(new Date).getTime()+"rnd"),this.initIntersactionObserver(t,r),window.addEventListener("beforeunload",(function(){n.executePixels(n.playingCreativeId,"notviewable")}))},e.prototype.checkCurrentState=function(){void 0===this.intersectionObserverCallback||this.isIOCallbackCalled||this.intersectionObserverCallback(this.lastIntersectionObserverEntry)},e.prototype.initIntersactionObserver=function(t,e){var i=this;this.intersectionObserverCallback=function(n){i.lastIntersectionObserverEntry=n,n&&n.forEach((function(n){i.checkThreshold(100*n.intersectionRatio),void 0!==(null==e?void 0:e.area)&&100*n.intersectionRatio>=e.area&&i.playingCreativeId&&!i.d.hidden?i.ioTimeoutId=i.w.setTimeout((function(){i.isIOCallbackCalled=!0,i.triggerViewableEvent(e),i.integration<2&&r.unobserve(t)}),1e3*(e.delay||0)):i.w.clearTimeout(i.ioTimeoutId)}))};var n={threshold:((null==e?void 0:e.area)||0)/100},r=new this.w.IntersectionObserver(this.intersectionObserverCallback,n);r.observe(t)},e.prototype.triggerViewableEvent=function(t){this.log("Element visible more than "+t.area+"% for "+t.delay+" seconds"),this.executePixels(this.playingCreativeId,"viewable"),this.executeViewCallback(t),t.testLayer&&this.resultLayer&&(this.resultLayer.innerHTML="&#10004;")},e.prototype.executeViewCallback=function(t){t.viewCallback&&(t.viewCallback(),t.viewCallback=void 0,this.log("View callback function called"))},e.prototype.checkElementStatus=function(t){var e={measurable:!0,element:t};if(!t||window.self===window.top||this.w.self===this.w.top)return this.log("No iframe detected"),e;this.log("Iframe detected");var i=this.useTopWindow();return e.element=null===i.currentFrame||i.currentFrame.parentNode===t.parentNode?t:i.currentFrame,i.currentWindow.$sf&&i.currentWindow.$sf.ext?(this.log("SafeFrame detected"),e.element=e.element||t):void 0!==window.inDapIF&&window.inDapIF?(this.log("Friendly iframe detected"),e.element=t):i.currentWindow===window.top?this.log("Secured iframe detected"):this.isAMPFrame?this.log("AMP iframe detected"):this.log("Cross-domain iframe detected"),e},e.prototype.addInfoLayer=function(){var t=this.addElement("div",document.body,{id:"testLayer_"+Math.round(1e5*Math.random()),style:"width:60px;height:30px;position:fixed;top:0;right:0;background-color:yellow;\n\t\t\tcolor:blue;font-size:20px;text-align:center;padding-top:5px;z-index:99999;"});return t.innerHTML="0%",t},e.prototype.checkThreshold=function(t){for(var e,i,n="area",r="lastSent",o=0,a=this.threshold;o<a.length;o++){var s=a[o];s[n]>t&&s[r]<=0?(null===(e=s.belowCallback)||void 0===e||e.call(s),s[r]=1):s[n]<=t&&s[r]>=0&&(null===(i=s.aboveCallback)||void 0===i||i.call(s),s[r]=-1)}},e.prototype.calculateArea=function(t,e){return!this.isMobile()&&0===t.videoIntegration&&e.clientHeight*e.clientWidth>242500?30:50},e.prototype.mergeOptions=function(t,e){var i={area:null==t?void 0:t.area,testLayer:(null==t?void 0:t.testLayer)||!1,logMessages:(null==t?void 0:t.logMessages)||!1,videoIntegration:(null==t?void 0:t.videoIntegration)||0,threshold:(null==t?void 0:t.threshold)||[],viewCallback:null==t?void 0:t.viewCallback};return t&&t.delay?i.delay=t.delay:i.delay=i.videoIntegration?2:1,i.area||(i.area=this.calculateArea(i,e)),i},e.prototype.executePixels=function(t,e){if(null==t)return!1;var i=!1;return this.pixels[t]&&this.pixels[t][e]&&(this.trackArrayOfPixels(this.pixels[t][e]),i=!0,delete this.pixels[t],this.playingCreativeId=null),i},e}(i(7322).Global);e.ViewabilityCore=o},5162:function(t,e,i){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Viewability=void 0;var o=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.init=function(t,e,i){this.log("init"),this.start(t,e,i)},e}(i(885).ViewabilityCore);e.Viewability=o,window.Viewability=o}},e={};(function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports})(7956)}();